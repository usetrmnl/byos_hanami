<% content_for :title, "Devices | Terminus" %>

<section class="page-devices">
  <header class="page-header">
    <h1 class="label">
      Devices

      <button class="popover-trigger" popovertarget="popover-shortcuts">
        <%= image_tag "icons/info.svg", width: 20, height: 20, loading: :lazy %>
      </button>
    </h1>

    <dialog id="popover-shortcuts" class="popover-content" popover="auto">
      <button class="close" popovertarget="popover-shortcuts" popovertargetaction="hide">
        <span aria-hidden=true>‚ùå</span>
        <span class="screen_reader">Close</span>
      </button>

      <h3 class="label">Keyboard Shortcuts</h3>

      <ul>
        <li><kbd>CONTROL + n</kbd>: New device.</li>
        <li><kbd>CONTROL + s</kbd>: Save device (when within form).</li>
      </ul>
    </dialog>

    <div class="actions">
      <a href="/devices/new"
         class="button button-new"
         hx-get="/devices/new"
         hx-trigger="click, keyup[ctrlKey&&key=='n'] from:body"
         hx-target="closest .page-devices"
         hx-swap="outerHTML"
         hx-push-url="true">
        New
      </a>
    </div>
  </header>

  <ul class="devices">
    <% devices.each do |device| %>
      <%= device.render :device %>
    <% end %>
  </ul>
</section>
