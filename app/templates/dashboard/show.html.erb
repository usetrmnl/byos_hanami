<% content_for :title, "Dashboard | Terminus" %>

<section class="page-dashboard">
  <header class="page-header">
    <h1 class="label">Dashboard</h1>
  </header>

  <div class="widgets">
    <fieldset class="box">
      <legend class="label">
        Devices
        <button id="devices-help" class="popover-trigger" popovertarget="popover-devices">
          ‚ÑπÔ∏è
        </button>
      </legend>

      <ul class="list">
        <% devices.each do |device| %>
          <%= tag.li link_to(device.label, routes.path(:device_show, id: device.id)) %>
        <% end %>
      </ul>

      <dialog id="popover-devices" class="popover-content" popover="auto">
        <button class="close" popovertarget="popover-devices" popovertargetaction="hide">
          <span aria-hidden=true>‚ùå</span>
          <span class="screen_reader">Close</span>
        </button>

        <h3 class="label">Devices</h3>

        <p>These are your currently registered devices.</p>
      </dialog>
    </fieldset>

    <fieldset class="box">
      <legend class="label">
        IP Addresses
        <button class="popover-trigger" popovertarget="popover-ip-addresses">‚ÑπÔ∏è</button>
      </legend>

      <ul class="list">
        <% ip_addresses.each do |ip| %>
          <%= tag.li ip.address_with_kind, class: "site-secret" %>
        <% end %>

        <li class="site-secret"><%= api_uri %> (API)</li>
      </ul>

      <dialog id="popover-ip-addresses" class="popover-content" popover="auto">
        <button class="close" popovertarget="popover-ip-addresses" popovertargetaction="hide">
          <span aria-hidden=true>‚ùå</span>
          <span class="screen_reader">Close</span>
        </button>

        <h3 class="label">IP Addresses</h3>

        <p>These are the Internet Protocol (IP) addresses of your local server. Use these to connect to your device. Use the API address to connect your device since you HTTPS isn't supported as of yet.</p>

        <p>üí° Prefer wired over wireless since the former is likely not to change on you as much.</p>
      </dialog>
    </fieldset>

    <fieldset class="box">
      <legend class="label">
        Firmware
        <button class="popover-trigger" popovertarget="popover-firmware">‚ÑπÔ∏è</button>
      </legend>

      <ul class="list">
        <li><%= link_to firmware_path.basename(".bin"), firmware_path %></li>
      </ul>

      <dialog id="popover-firmware" class="popover-content" popover="auto">
        <button class="close" popovertarget="popover-firmware" popovertargetaction="hide">
          <span aria-hidden=true>‚ùå</span>
          <span class="screen_reader">Close</span>
        </button>

        <h3 class="label">Firmware</h3>

        <p>Displays the latest firmware version. Automatically updates when a new version is detected.</p>
      </dialog>
    </fieldset>
  </div>
</section>
