<%= render "shared/title", text: "Edit #{playlist.label} Playlist" %>

<section class="page-playlists">
  <header class="page-header">
    <ul class="site-breadcrumbs">
      <li class="breadcrumb"><%= link_to "Playlists", routes.path(:playlists), class: :link %></li>
      <li class="breadcrumb">
        <%= link_to playlist.label, routes.path(:playlist, id: playlist.id), class: :link %>
      </li>
      <li class="breadcrumb">Edit</li>
    </ul>
  </header>

  <div class="page-body">
    <div class="playlist">
      <form action="<%= routes.path :playlist_update, id: playlist.id %>"
            method="put"
            class="page-form">

        <h1 class="label">Edit Playlist</h1>

        <%= render :fields, playlist:, fields: fields.value, errors: %>

        <div class="form-actions">
          <%= render "save_button", verb: :put, path: "/playlists/#{playlist.id}" %>

          <a href="<%= routes.path :playlist, id: playlist.id %>"
             class="button-decline"
             hx-get="<%= routes.path :playlist, id: playlist.id %>"
             hx-trigger="click"
             hx-target="closest .page-playlists"
             hx-swap="outerHTML"
             hx-push-url="true">
             Cancel
          </a>
        </div>
      </form>

      <div hx-get="<%= routes.path :playlist_items, playlist_id: playlist.id %>"
           hx-trigger="load"
           hx-swap="outerHTML">
      </div>
    </div>
  </div>
</section>
